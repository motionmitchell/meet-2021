(this["webpackJsonpmeet-2021"]=this["webpackJsonpmeet-2021"]||[]).push([[0],{203:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),s=n(38),o=n.n(s),i=(n(87),n(21)),u=n(7),l=n(6),d=n(13),j=n(5),b=n(3),p=n.n(b),f=n(11),v=n(17),O=[],h="http://localhost:5000/",x={eventId:1,userId:1,date:"",time:"",city:"",capacity:32,contactInfo:{name:"",email:"",website:""},title:"",description:"",status:0},m=Object(v.b)("todos/getEventList",function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetchCount,e.prev=1,e.next=4,fetch(h+"events/"+n);case 4:if(!(a=e.sent).ok){e.next=14;break}return e.next=8,a.json();case 8:return c=e.sent,!0,y(c),e.abrupt("return",{events:c});case 14:return!1,e.next=17,g();case 17:return r=e.sent,e.abrupt("return",{events:r});case 19:e.next=28;break;case 21:return e.prev=21,e.t0=e.catch(1),!1,e.next=26,g(n);case 26:return s=e.sent,e.abrupt("return",{events:s});case 28:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}()),g=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O,a=localStorage.getItem("EVENTS"),console.log("TEMP",a),null===a)localStorage.setItem("EVENTS",JSON.stringify(O));else if(n=JSON.parse(a),t<n.length){for(c=[],r=0;r<t;r++)c.push(n[r]);n=c}return console.log("eventList",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("EVENTS",JSON.stringify(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("pushEvent",t),!(t.eventId>0)){e.next=7;break}return e.next=4,N(t);case 4:return"updated"!==(n=e.sent)&&(t.eventId=-1,t.title=n),e.abrupt("return",t);case 7:return a={eventId:(new Date).getTime(),userId:t.userId,date:t.date,time:t.time,city:t.city,capacity:t.capacity,contactInfo:t.contactInfo,title:t.title,description:t.description,status:0},console.log("PUSH TO LOCAL ",a),e.next=11,g();case 11:return c=e.sent,console.log("TEMP FROM FETCH",c),c.push(a),e.next=16,y(c);case 16:return console.log("temp",c),e.abrupt("return",t);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=Object(v.b)("event/makeChartData",Object(f.a)(p.a.mark((function e(){var t,n,a,c,r,s,o,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:return t=e.sent,n=["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"],console.log("makeChartData.start...",t),e.next=8,t.sort((function(e,t){return e.city>t.city}));case 8:for(i in console.log("TEMP",t),a=[],c=[],r=[],s=t[0].city,o=0,a.push(0),c.push(s),r.push("rgba(255, 99, 132, 0.6)"),t)console.log(o+") CITY: "+t[i].city),t[i].city!==s?(u=a.length-1,a[u]=o,s=t[i].city,o=1,r.push(n[u+1]),a.push(o),c.push(s)):o++;return a[a.length-1]=o,l={labels:c,datasets:[{label:"Events",data:a,backgroundColor:r}]},console.log("chartData",l),e.abrupt("return",l);case 22:case"end":return e.stop()}}),e)})))),N=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updateEvent: ",t),e.next=3,g();case 3:n=e.sent,a=parseInt(t.eventId),t.eventId=a,e.t0=p.a.keys(n);case 7:if((e.t1=e.t0()).done){e.next=17;break}if(c=e.t1.value,console.log(a+" COMPARE TO: ",n[c]),n[c].eventId!==a){e.next=15;break}if(console.log("UPDATING: ",t,n[c]),n[c].city===t.city&&n[c].date===t.date&&n[c].time===t.time){e.next=14;break}return e.abrupt("return","city/date/time change not allowed in offline mode");case 14:n[c]=t;case 15:e.next=7;break;case 17:return e.next=19,y(n);case 19:return e.abrupt("return","updated");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("pushEventToServer",t),n={eventId:t.eventId,userId:t.userId,date:t.date,time:t.time,city:t.city,capacity:t.capacity,contactInfo:t.contactInfo,title:t.title,description:t.description},e.prev=2,e.next=5,fetch(h+"event/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,E(t);case 12:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(v.b)("event/addEventItem",function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0===t.event.eventId?"Event added":"Event updated",e.next=3,S(t.event);case 3:return a=e.sent,console.log("EVENT: ",a),console.log("EVENTS",O),console.log("EVENT ADDED: ",a),c=a.eventId>0?n:a.title,console.log("addEventItem.message: "+c),e.abrupt("return",{message:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(v.b)("todos/deleteEventItem",function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(),a=[],n.forEach((function(e){e.id!==t.id?a.push(e):console.log("DELETING ",e)})),y(a),e.abrupt("return",{id:t.id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(v.b)("todos/getEvent",function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,c,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(n=e.sent,{},0!==(a=parseInt(t.id))){e.next=8;break}return c=x,e.abrupt("return",{event:c});case 8:e.t0=p.a.keys(n);case 9:if((e.t1=e.t0()).done){e.next=17;break}if(r=e.t1.value,(s=n[r]).eventId!==a){e.next=15;break}return console.log("FOUND: ",s),e.abrupt("return",{event:s});case 15:e.next=9;break;case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=Object(v.c)({name:"events",initialState:[],reducers:{addEvent:function(e,t){var n=t.payload.event;e.push(n)},deleteEvent:function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))}},extraReducers:(a={},Object(j.a)(a,C.fulfilled,(function(e,t){return t.payload.event})),Object(j.a)(a,k.fulfilled,(function(e,t){return t.payload.message})),Object(j.a)(a,C.fulfilled,(function(e,t){return t.payload.event})),Object(j.a)(a,I.fulfilled,(function(e,t){return t.payload.chartData})),Object(j.a)(a,w.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload.id}))})),a)}),D=T.actions,A=(D.addEvent,D.deleteEvent,T.reducer),R=n(206),V=n(207),M=n(208),P=n(1),J=function(e){var t=e.id,n=Object(c.useState)(0),a=Object(l.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(""),i=Object(l.a)(o,2),u=i[0],j=i[1],b=Object(c.useState)(""),p=Object(l.a)(b,2),f=p[0],v=p[1],O=Object(c.useState)(""),h=Object(l.a)(O,2),x=h[0],m=h[1],g=Object(c.useState)(""),y=Object(l.a)(g,2),E=y[0],I=y[1],N=Object(c.useState)(""),S=Object(l.a)(N,2),w=S[0],T=S[1],D=Object(c.useState)(""),A=Object(l.a)(D,2),J=A[0],L=A[1],F=Object(c.useState)(""),U=Object(l.a)(F,2),B=U[0],G=U[1],H=Object(c.useState)(""),z=Object(l.a)(H,2),W=z[0],Y=z[1],q=Object(c.useState)(""),K=Object(l.a)(q,2),Q=K[0],X=K[1],Z=Object(d.b)();Object(c.useEffect)((function(){console.log("FORM: "+t),s(t),Z(C({id:t})).then((function(e){var t=e.payload.event;console.log("EVENT",t),j(t.date),v(t.time),m(t.city),I(t.capacity),T(t.contactInfo.name),L(t.contactInfo.email),G(t.description),Y(t.title)}))}),[]);return Object(P.jsx)("div",{children:Object(P.jsxs)(R.a,{children:[Object(P.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),W&&u&&f){var t={eventId:r,userId:1,date:u,time:f,city:x,capacity:E,contactInfo:{name:w,email:J},title:W,description:B};console.log("NEW EVENT",t),Z(k({event:t})).then((function(e){X(e.payload.message)}))}},children:[Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"date",className:"form-control mb-2 mr-sm-2",placeholder:"Event Date",value:u,onChange:function(e){return j(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Event Time",value:f,onChange:function(e){return v(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"City",value:x,onChange:function(e){return m(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Capacity",value:E,onChange:function(e){return I(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Contact Name",value:w,onChange:function(e){return T(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Contact Email",value:J,onChange:function(e){return L(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{className:"col-md-4",children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Title",value:W,onChange:function(e){return Y(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{children:Object(P.jsx)("input",{type:"text",className:"form-control mb-2 mr-sm-2",placeholder:"Description",value:B,onChange:function(e){return G(e.target.value)}})})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(M.a,{children:Object(P.jsx)("button",{type:"submit",className:"btn btn-primary mb-2",children:"Submit"})})})]}),Object(P.jsx)("div",{children:Q})]})})},L=n(209),F=function(e){e.id;var t=e.event,n=e.activeRowId,a=e.setActiveRowId;Object(d.b)();return Object(P.jsxs)(V.a,{children:[Object(P.jsx)(M.a,{className:"col-md-4 text-start",children:Object(P.jsx)(i.b,{to:"/edit/".concat(t.eventId),children:t.title})}),Object(P.jsx)(M.a,{className:"col-md-4 text-start",children:t.city}),Object(P.jsxs)(M.a,{children:[Object(P.jsx)(L.a,{onClick:function(){var e;(e=t.eventId)===n?(a(0),n=0):(a(e),n=e)},children:"..."}),n===t.eventId?Object(P.jsxs)("div",{children:[t.date," | ",t.time," |",t.description," |  ",t.city,Object(P.jsx)("hr",{})]}):Object(P.jsx)("span",{})]})]},"eventId")},U=function(){var e=Object(d.b)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(32),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(c.useState)(0),b=Object(l.a)(j,2),p=b[0],f=b[1],v=Object(c.useState)(!1),O=Object(l.a)(v,2),h=O[0],x=O[1];Object(c.useEffect)((function(){e(m({fetchCount:i})).then((function(e){console.log("loaded",e),r(e.payload.events),x(!0)}))}),[i]);return Object(P.jsxs)(R.a,{children:[Object(P.jsxs)("div",{children:["Events:",Object(P.jsx)("input",{type:"text",value:i,onChange:function(e){return u(e.target.value)},onBlur:function(e){alert(i)}})]}),h?a.map((function(e){return Object(P.jsx)(F,{id:e.eventId,event:e,activeRowId:p,setActiveRowId:f})})):Object(P.jsx)("div",{})]})},B=n(82),G=function(){var e=Object(d.b)(),t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],r=n[1],s=!0,o=!0,i="right",u=Object(c.useState)(!1),j=Object(l.a)(u,2),b=j[0],p=j[1];return Object(c.useEffect)((function(){e(I()).then((function(e){console.log(e.payload),r(e.payload),p(!0)}))}),[e]),Object(P.jsx)("div",{children:b?Object(P.jsx)(B.a,{data:a,options:{title:{display:s,text:"Events by city",fontSize:25},legend:{display:o,position:i}}}):Object(P.jsx)("div",{})})},H=function(){return Object(P.jsxs)(i.a,{children:[Object(P.jsx)("div",{children:"version: 4"}),Object(P.jsxs)("div",{className:"left20px container",children:[Object(P.jsxs)("span",{children:[Object(P.jsx)(i.b,{to:"/events",children:" Events"}),"|",Object(P.jsx)(i.b,{to:"/form",children:" Add Event"}),"| ",Object(P.jsx)(i.b,{to:"/chart",children:" Chart"})]}),Object(P.jsx)("hr",{})]}),Object(P.jsxs)(u.c,{children:[Object(P.jsx)(u.a,{exact:!0,path:"/"}),Object(P.jsx)(u.a,{exact:!0,path:"/events",children:Object(P.jsx)(U,{})}),Object(P.jsx)(u.a,{exact:!0,path:"/chart",children:Object(P.jsx)(G,{})}),Object(P.jsx)(u.a,{path:"/form",children:Object(P.jsx)(J,{id:0})}),Object(P.jsx)(u.a,{path:"/edit/:eventId",render:function(e){var t=e.match;return Object(P.jsx)(J,{id:t.params.eventId})}})]})]})};n(203),n(204);var z=function(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)("div",{className:"container bg-white p-4 mt-5",children:[Object(P.jsx)("h1",{children:"Events:"}),Object(P.jsx)(H,{})]})})},W=Object(v.a)({reducer:{events:A}});o.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(d.a,{store:W,children:Object(P.jsx)(z,{})})}),document.getElementById("root"))},87:function(e,t,n){}},[[205,1,2]]]);
//# sourceMappingURL=main.1660cb7a.chunk.js.map